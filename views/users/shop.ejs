<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop - Products</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/shop.css">
  <link href="/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

  <style>
    .product-card {
      position: relative;
      text-align: center;
      background: #f9f9f9;
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 5px;
      transition: box-shadow 0.3s ease;
    }
  
    .product-card:hover {
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
  
    .product-image-container {
      position: relative;
      overflow: hidden;
    }
  
    .product-image {
      width: 100%;
      border-radius: 5px;
    }
  
    .icon-overlay {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      flex-direction: column; /* Stack icons vertically */
      gap: 10px; /* Space between the icons */
      opacity: 0;
      transition: opacity 0.3s ease;
    }
  
    .product-image-container:hover .icon-overlay {
      opacity: 1;
    }
  
    .wishlist-icon, .add-cart-icon {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 50%;
      color: #fff;
      font-size: 18px;
      cursor: pointer;
      transition: transform 0.3s ease, background-color 0.3s ease, color 0.3s ease;
    }
  
    .wishlist-icon.clicked {
      background-color: #e74c3c;
      color: #fff;
    }
  
    .add-cart-icon.clicked {
      background-color: #2ecc71;
      color: #fff;
    }
  
    .wishlist-icon:hover, .add-cart-icon:hover {
      transform: scale(1);
    }
  
    .product-name {
      margin-top: 10px;
      font-weight: bold;
      font-size: 1rem;
      color: #333;
    }
  
    .product-price {
      font-size: 1rem;
      color: #555;
    }
  </style>
  
</head>

<body>
  <%- include("./layouts/header.ejs") %>

  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a href="/home" class="d-flex align-items-center">
          Home
        </a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">Shop</li>
    </ol>
  </nav>

  <!-- Product Grid -->
<section class="container-fluid shopcontainer">
  <div class="product-grid">
    <div class="row">
      <% if (products && products.length > 0) { %>
        <% products.forEach(function(product) { %>
          <div class="col-md-3 col-sm-6 mb-4"> <!-- 4 products per row on medium screens, 2 per row on smaller screens -->
            <div class="product-card">
              <div class="product-image-container">
                <!-- Main Product Image -->
                <a href="/productDetails/<%= product._id %>">
                  <img src="/<%= product.images[0] %>" alt="<%= product.name %>" class="img-fluid product-image">
                </a>
                <!-- Icons -->
                <div class="icon-overlay">
                  <i class="fa fa-heart wishlist-icon" title="Add to Wishlist" onclick="toggleIconColor(this, 'wishlist')"></i>
                  <i class="fa fa-shopping-cart add-cart-icon" title="Add to Cart" onclick="toggleIconColor(this, 'cart')"></i>
                </div>
              </div>
              <p class="product-name"><%= product.name %></p>
              <span class="product-price">â‚¹<%= product.offerPrice ? product.offerPrice : product.price %></span>
            </div>
          </div>
        <% }); %>
      <% } else { %>
        <p>No products found.</p>
      <% } %>
    </div>
  </div>
</section>

  <%- include("./layouts/footer.ejs") %>


  <script>
    function toggleIconColor(iconElement, type) {
      // Check if the icon is already clicked
      if (type === "wishlist") {
        iconElement.classList.toggle("clicked");
      } else if (type === "cart") {
        iconElement.classList.toggle("clicked");
      }
    }
  </script>
  

  <script src="/js/users/shop.js"></script>
</body>
</html>
